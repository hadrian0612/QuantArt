# BBIKDJSelector (少妇战法) 配置文件
# 一个策略一个配置文件，直接包含策略配置，无需 selectors 层级

class: BBIKDJSelector
alias: 少妇战法
activate: true

# ========== 策略原理简介 ==========
# 少妇战法：基于技术指标的多因子选股策略
# 
# 核心逻辑：
# 1. BBI趋势向上：多空指标(BBI)整体上升，允许一定回撤，捕捉上升趋势
# 2. KDJ超卖：J值处于低位，寻找超卖反弹机会
# 3. MA60上穿：价格站上60日均线且有过有效上穿，确认趋势转强
# 4. MACD多头：DIF > 0，确认多头动能
# 5. 知行条件：收盘价和短期线均高于长期线，技术面多头排列
# 6. 价格波动控制：限制近期价格波动幅度，避免极端波动
# 7. 当日过滤：涨跌幅和振幅限制，避免追高风险
#
# 适用场景：寻找处于上升趋势中、技术面转强、短期回调后的买入机会
# ===================================

params:
  # KDJ指标J值阈值：J < j_threshold 时认为超卖
  # 值越小越严格（如-10比-5更严格），建议范围：-20 ~ 0
  j_threshold: 15
  
  # BBI上升趋势检测的最小窗口长度（交易日数）
  # 值越大要求趋势持续时间越长，建议范围：10 ~ 120
  bbi_min_window: 10
  
  # BBI偏移天数：忽略当前日期开始bbi_offset_n个交易日的BBI线
  # 由于KDJ中的J要为负值，股价不可避免有一段下行
  # 可以不在意当前日期开始有bbi_offset_n个交易日的BBI线（无论上下行）
  # 只要bbi_offset_n之前max_window内有bbi_min_window个交易日BBI线连续向上
  # 建议范围：0 ~ 20
  bbi_offset_n: 8
  
  # 最大回看窗口长度（交易日数）
  # 用于计算J值分位数、价格波动幅度等，建议范围：60 ~ 250
  max_window: 60
  
  # 价格波动幅度限制（百分比，如1表示1%）
  # 限制最近max_window根K线内收盘价的最大波动幅度
  # 值越小越严格，建议范围：0.5 ~ 5.0
  price_range_pct: 5
  
  # BBI上升趋势的容错阈值（0-1之间）
  # 允许BBI一阶差分为负的比例，0.2表示允许20%的回撤
  # 值越大越宽松，建议范围：0.05 ~ 0.3
  bbi_q_threshold: 0.3
  
  # KDJ指标J值的分位数阈值（0-1之间）
  # J值 <= 历史J值的该分位数时也认为超卖
  # 0.10表示J值位于历史最低10%分位，建议范围：0.05 ~ 0.20
  j_q_threshold: 0.10
