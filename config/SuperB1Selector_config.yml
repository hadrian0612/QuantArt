# SuperB1Selector (SuperB1战法) 配置文件
# 一个策略一个配置文件，直接包含策略配置，无需 selectors 层级

class: SuperB1Selector
alias: SuperB1战法
activate: true

# ========== 策略原理简介 ==========
# SuperB1战法：在“少妇战法”（BBIKDJSelector）基础上的二次筛选策略
#
# 核心逻辑：
# 1. 历史匹配：在最近 lookback_n 个交易日内，至少有一天满足 BBIKDJSelector 条件
# 2. 横盘盘整：从该日 t_m 到当前交易日前一日，收盘价波动率不超过 close_vol_pct
# 3. 当日明显回调：当前收盘价相对前一日跌幅 >= price_drop_pct
# 4. J值极低：当日KDJ的J值非常低（绝对阈值或分位阈值）
# 5. 知行条件：在关键点位要求短期线 > 长期线，过滤弱势个股
#
# 适用场景：在“少妇战法”筛出的强势股中，寻找回调后的二次上车机会
# ===================================

params:
  # 回看窗口长度（交易日数）
  # 在该窗口内寻找满足 BBIKDJSelector 的那一天 t_m
  # 值越大，允许“历史信号”离当前更远，建议范围：10 ~ 120
  lookback_n: 10

  # 盘整区间收盘价波动率上限（如 0.02 表示 2%）
  # 从 t_m 到当前交易日前一日，收盘价最大波动不能超过该比例
  # 值越小越严格，建议范围：0.01 ~ 0.10
  close_vol_pct: 0.02

  # 当日相对前一日的最小跌幅（如 0.02 表示跌幅 >= 2%）
  # 用于寻找“上涨后明显回调”的买点
  # 建议范围：0.01 ~ 0.10
  price_drop_pct: 0.02

  # KDJ指标J值绝对阈值：J < j_threshold 时认为极低
  # 数值一般为负，越小越严格，建议范围：-20 ~ 0
  j_threshold: 10

  # KDJ指标J值的分位数阈值（0-1之间）
  # 当日J值 <= 过去 lookback_n 日J值的该分位数时也认为极低
  # 建议范围：0.05 ~ 0.20
  j_q_threshold: 0.10

  # 内部嵌套的 BBIKDJSelector 参数（即“少妇战法”的配置）
  # 用于判定历史上的强势启动点 t_m
  B1_params:
    # KDJ指标J值阈值（内部少妇战法）
    j_threshold: 15

    # BBI 上升趋势检测的最小窗口长度
    bbi_min_window: 20

    # 最大回看窗口长度，用于 BBi 趋势和J值分位等
    max_window: 120

    # 价格波动幅度限制（百分比，如1表示1%）
    price_range_pct: 1

    # BBI上升趋势的容错阈值（0-1之间）
    bbi_q_threshold: 0.3

    # KDJ J值分位数阈值（0-1之间）
    j_q_threshold: 0.10

