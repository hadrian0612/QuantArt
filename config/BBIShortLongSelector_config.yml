# BBIShortLongSelector (补票战法) 配置文件
# 一个策略一个配置文件，直接包含策略配置，无需 selectors 层级

class: BBIShortLongSelector
alias: 补票战法
activate: true

# ========== 策略原理简介 ==========
# 补票战法：在 BBI 趋势向上的前提下，结合短/长期 RSV 强弱关系的补仓/加仓策略
#
# 核心逻辑：
# 1. BBI 上升：多空指标整体向上，确认中期趋势偏多
# 2. 长期 RSV 强势：最近 m 天内，长期 RSV 始终高位（>= upper_rsv_threshold）
# 3. 短期 RSV 结构：最近 m 天中，先有一次短期 RSV >= upper_rsv_threshold，
#    之后又出现短期 RSV < lower_rsv_threshold，最后一天短期 RSV 再次回到高位
# 4. DIF > 0：MACD 的 DIF 大于 0，确认多头动能
# 5. 知行条件：当日短期线与长期线满足特定关系，过滤技术面较弱个股
#
# 适用场景：在中期强势趋势中，捕捉短期震荡后的“补票”机会
# ===================================

params:
  # 短期 RSV 的窗口长度（交易日数）
  # 通常小于长期 RSV，用于刻画短期超买/超卖结构
  # 建议范围：3 ~ 10
  n_short: 5

  # 长期 RSV 的窗口长度（交易日数）
  # 用于刻画中长期相对强弱，建议范围：14 ~ 30
  n_long: 21

  # 观测窗口长度 m（最近 m 天）
  # 在该窗口内同时考察短期/长期 RSV 的结构
  # 建议范围：3 ~ 10，且 m >= 2
  m: 5

  # BBI 上升趋势检测的最小窗口长度（交易日数）
  # 值越大，对中期趋势要求越严格，建议范围：10 ~ 150
  bbi_min_window: 2

  # BBI 检测的最大回看窗口长度（交易日数）
  # 影响趋势判定的历史长度和性能，建议范围：60 ~ 250
  max_window: 120

  # BBI 上升趋势的容错阈值（0-1之间）
  # 允许 BBI 一阶差分为负的比例，0.2 表示允许 20% 的回撤
  # 值越大越宽松，建议范围：0.05 ~ 0.3
  bbi_q_threshold: 0.2

  # 长期 RSV 的强势阈值（0-100）
  # 最近 m 天内，所有 RSV_long 均需 >= 该值
  # 建议范围：60 ~ 90
  upper_rsv_threshold: 75

  # 短期 RSV 的低位阈值（0-100）
  # 在 m 日窗口内要求出现一次 RSV_short < 该值，以体现“短期洗盘/回踩”
  # 建议范围：10 ~ 40
  lower_rsv_threshold: 25

